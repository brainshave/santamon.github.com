<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <meta charset="utf-8" />
    <link rel="alternate" type="application/atom+xml" title="Long-standing Bug" href="atom.xml" />
    <link rel="stylesheet" href="media/main.css" />

    <title>Reintroducing GUI FTW! and Progress Report</title>
    <!-- work around IE (8?) not handling properly unknown tags -->
    <!-- suggested here: http://diveintohtml5.org/semantics.html -->
    <script>
      document.createElement("article");
      document.createElement("nav");
      document.createElement("aside");
      document.createElement("footer");
      document.createElement("time");
    </script>
  </head>
  <body>
    <div id="main_container">
      <div id="left_container">
        <header>
          <a href="index.html" id="logo"><img src="media/header.svg" /></a>
        </header>
        <article id="content">
  <time>2011-05-16</time>
  <h1>Reintroducing GUI FTW! and Progress Report</h1>
  

<p>I meant this post to be a simple translation of
<a href="niech-sie-stanie-gui-ftw.html">this</a> but some things changed that are
worth mentioning.</p>

<p><strong>GUI FTW!</strong> is a <em>declarative</em> GUI library. I&rsquo;ve borrowed concepts
from the Web (the good parts). It&rsquo;s kind of little internal DSL for
GUI&rsquo;s. You&rsquo;ll stop manually creating boring repetitive code like:</p>

<div class="highlight"><pre><code class="clojure"><span class="p">(</span><span class="nb">doto </span><span class="p">(</span><span class="nf">JFrame</span><span class="o">.</span><span class="p">)</span>
  <span class="p">(</span><span class="o">.</span><span class="nv">setA</span> <span class="s">&quot;A&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="o">.</span><span class="nv">setB</span> <span class="s">&quot;B&quot;</span><span class="p">)</span>
  <span class="p">(</span><span class="o">.</span><span class="nv">addXxxListener</span> <span class="p">(</span><span class="nf">reify</span> <span class="o">...</span><span class="p">))</span>
  <span class="o">...</span><span class="p">)</span>
</code></pre>
</div>


<p>Instead all the boilerplate will be generated by GUI FTW! and you&rsquo;ll
never need to look at code like that again.</p>

<p>The before-mentioned <strong>good parts</strong> of the Web include:</p>

<ol>
<li>a <b>GUI structure tree</b> (say, like HTML but in Clojure),


<div class="highlight"><pre><code class="clojure"><span class="p">[</span><span class="nv">JFrame</span> <span class="p">[</span><span class="nv">*id</span> <span class="nv">:main-window</span><span class="p">]</span>
 <span class="p">[</span><span class="nv">JButton</span> <span class="p">[</span><span class="nv">*id</span> <span class="nv">:super-button</span><span class="p">]]]</span>
</code></pre>
</div>

</li>
<li><b>Cascade Style Sheets</b> (say, like CSS but in Clojure),


<div class="highlight"><pre><code class="clojure"><span class="p">[</span><span class="nv">:main-window</span><span class="p">]</span> <span class="p">[</span><span class="nv">:title</span> <span class="s">&quot;Window FTW!&quot;</span><span class="o">,</span> <span class="nv">:visible</span> <span class="nv">true</span><span class="p">]</span>
<span class="p">[</span><span class="nv">:super-button</span><span class="p">]</span> <span class="p">[</span><span class="nv">:text</span> <span class="s">&quot;Make something happen!&quot;</span><span class="p">]</span>
</code></pre>
</div>

</li>
<li><b>hooking functions into events</b> (say, like JavaScript but in Clojure).


<div class="highlight"><pre><code class="clojure"><span class="p">[</span><span class="nv">:super-button</span><span class="p">]</span> <span class="p">[</span><span class="nv">:action++performed</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">state</span> <span class="nv">event</span><span class="p">]</span> <span class="o">...</span><span class="p">)]</span>
</code></pre>
</div>

</li>
</ol>


<p>The bad parts would be using XML and JavaScript literally ;) .
Actually, the CSS part look and works like original CSS. It just
doesn&rsquo;t have those fancy selectors yet.</p>

<div class="subsection_number h2">1</div>


<h2>SWT FTW! (and swing too&hellip;)</h2>




<div class="didascalia"><p>[1] Well, for toolkits that follow the same pattern
that SWT and Swing do.</p>

<p>[2] Notice that
<a href="https://github.com/santamon/GUIFTW/blob/9febcf9559cade88394e9fc66a91d0a9bffdb499/src/guiftw/swt.clj#L13">swt</a>
is just a wrapper around <code>parse-gui</code> and <code>swt-create</code>).</p>
</div>


<p>GUI FTW works with SWT! It&rsquo;s because it&rsquo;s an <strong>abstract</strong>
library. Neither Swing nor SWT stuff are hard-coded. And GUI FTW needs
only one function to be implemented to support another toolkit. [1] And those functions are
simple as
<a href="https://github.com/santamon/GUIFTW/blob/9febcf9559cade88394e9fc66a91d0a9bffdb499/src/guiftw/swt.clj#L8">swt-create</a>. [2]</p>

<div class="subsection_number h2">2</div>


<h2>Reusability</h2>


<p>What&rsquo;s created with GUI FTW! is always reusable: you&rsquo;ll get a function
to instantiate your GUI as many times as you want to. Also, style
sheets are list of function-like objects that applies some properties
to objects. You can mix different GUI&rsquo;s with different style sheets at
runtime freely. This paragraph is here in case of thought that
everything is written using macros flew across someone&rsquo;s mind ;)
. Actually, I&rsquo;ve tried to minimize use of macros.</p>

<div class="subsection_number h2">3</div>


<h2>More?</h2>


<p>I&rsquo;ve setup a wiki on GitHub and even wrote a tutorial for GUI
FTW!. Here&rsquo;s a couple of links you&rsquo;d likely be interested in:</p>

<ul>
<li><a href="https://github.com/santamon/GUIFTW">Project Page</a></li>
<li><a href="https://github.com/santamon/GUIFTW/wiki">Wiki</a></li>
<li><a href="https://github.com/santamon/GUIFTW/wiki/Overview">Overview</a></li>
<li><a href="https://github.com/santamon/GUIFTW/wiki/One-Tutorial-For-All">One <strong>Tutorial</strong> For All</a> (including Swing <em>and</em> SWT)</li>
<li><a href="http://longstandingbug.com/GUIFTW">Online Docs</a></li>
</ul>


<div class="subsection_number h2">4</div>


<h2>What&rsquo;s New?</h2>


<p>Since the
<a href="niech-sie-stanie-gui-ftw.html">original announcement in Polish</a> I&rsquo;ve
added couple of things, most important runtime state handling, support
for custom &ldquo;special properties&rdquo; and for custom
&ldquo;<a href="https://github.com/santamon/GUIFTW/issues/1">adders</a>&rdquo; (Swing only).</p>

<div class="subsection_number h3">4.1</div>


<h3>State in Sane Manner</h3>


<p>After creating a widget you&rsquo;ll get a map wrapped with atom which I call
&ldquo;GUI state&rdquo;. It contains data about identifiers, groups, and root of
the widget tree. Any other additional data can be added by user. Every
event handler fn will get that state as first argument. You can query
state like this:</p>

<div class="highlight"><pre><code class="clojure"><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">@state</span> <span class="nv">:ids</span> <span class="nv">:asdf</span><span class="p">)</span>    <span class="c1">;; get object with id :asdf</span>
<span class="p">(</span><span class="nb">-&gt; </span><span class="nv">@state</span> <span class="nv">:groups</span> <span class="nv">:qwer</span><span class="p">)</span> <span class="c1">;; get list of objects in group :qwer</span>
<span class="p">(</span><span class="nb">-&gt; </span><span class="nv">@state</span> <span class="nv">:root</span><span class="p">)</span>         <span class="c1">;; get root, usually the window</span>
</code></pre>
</div>


<p>When creating widgets you either pass state explicitly or a new one
is created for you. You can also decide which parts of window share
state and which doesn&rsquo;t.</p>

<p>For more info check out last part of
<a href="https://github.com/santamon/GUIFTW/wiki/Overview">Overview</a> on wiki.</p>

<div class="subsection_number h3">4.2</div>


<h3>Custom &ldquo;Adders&rdquo;</h3>


<p>I knew that the day will come that I get hit by some Swing or SWT
-specific quirk. So I got an
<a href="https://github.com/santamon/GUIFTW/issues/1">issue</a> :) (Thanks to the
Reporter, by the way).</p>

<p>Everything is sweet and honey in Swing when you can use method <code>add</code>
to add object to its parent. But there are some cases when Swing
designers broke that pattern, most notably the
<a href="http://download.oracle.com/javase/6/docs/api/javax/swing/JTabbedPane.html">JTabbedPane</a>
when you have to use <code>addTab</code> method. So now (only in Swing, SWT has
different &ldquo;parenting&rdquo; scheme) you can set <code>:*adder</code> property to change
default behavior. Adder is just a function that takes 4 arguments
<code>[parent parent-style child child-style]</code> and does whatever is
needed. For <code>JTabbedPane</code> it would be:</p>

<div class="highlight"><pre><code class="clojure"><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">parent</span> <span class="nv">parent-style</span> <span class="nv">child</span> <span class="nv">child-style</span><span class="p">]</span>
  <span class="p">(</span><span class="o">.</span><span class="nv">addTab</span> <span class="nv">parent</span> <span class="p">(</span><span class="nb">-&gt; </span><span class="nv">child-style</span> <span class="nv">:specials</span> <span class="nv">:*tab-title</span><span class="p">)</span> <span class="nv">child</span><span class="p">))</span>
</code></pre>
</div>


<p>There&rsquo;s also a case of
<a href="http://download.oracle.com/javase/6/docs/api/javax/swing/JScrollPane.html">JScrollPane</a>
where the <code>setViewportView</code> method should be used. When you want to
have scroll controls on <code>JTextArea</code>, you have to wrap a <code>JScrollPane</code>
around it. So it sounds like putting text area into scroll pane. So
for this scenario we&rsquo;d write:</p>

<div class="highlight"><pre><code class="clojure"><span class="p">[</span><span class="nv">JScrollPane</span> <span class="p">[</span><span class="nv">:*adder</span> <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">parent</span> <span class="nv">_</span> <span class="nv">child</span> <span class="nv">_</span><span class="p">]</span>
                        <span class="p">(</span><span class="o">.</span><span class="nv">setViewportView</span> <span class="nv">parent</span> <span class="nv">child</span><span class="p">))]</span>
 <span class="p">[</span><span class="nv">JTextArea</span><span class="p">]]</span>
</code></pre>
</div>


<p>instead of <code>[JScrollPane [:viewport-view (JTextArea.)]]</code> which breaks
flow of the tree (and you can&rsquo;t use other goodness of GUI FTW! for the
text area object like styles or grouping).</p>

<p>There&rsquo;s a <a href="https://github.com/santamon/GUIFTW/blob/master/src/guiftw/examples/swing/custom_adders.clj">fancy example</a> using those two.</p>

<div class="subsection_number h2">5</div>


<h2>Why Bother the Programmer?</h2>




<div class="didascalia"><p>[3] Good luck with that, I live on 10th floor :P.</p>
</div>


<p>If you look at my
<a href="https://github.com/santamon/GUIFTW/blob/9febcf9559cade88394e9fc66a91d0a9bffdb499/TODO.md">TODO</a>
list you will see that I plan to put those quirks in special style
sheet in <code>guiftw.swing</code>. I also consider using this style sheet by
default in Swing. If you know any <strong>other cases</strong> that should be
included, <em>please</em> let me know, either by
<a href="https://github.com/santamon/GUIFTW/issues">creating an issue</a>,
<a href="http://longstandingbug.com/info.html">mailing me</a> or throwing a brick
at my window. [3]</p>



<div>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'longstandingbug'; // required: replace example with your forum shortname

  // The following are highly recommended additional parameters. Remove the slashes in front to use.
  
  
  
  var disqus_identifier = 'reintroducing-guiftw.html';
  var disqus_url = 'http://longstandingbug.com/reintroducing-guiftw.html';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>


</article>

      </div>
      <div id="right_container">
        <nav id="meta_menu">
          <a href="index.html">Home</a><br />
          <a href="atom.xml">Atom</a><br />
          <a href="info.html">Author</a><br />
          <a href="http://twitter.com/szywon">Twitter</a><br />
          <a href="http://github.com/santamon">GitHub</a>
        </nav>
        <nav id="projects_menu">
          <p>Projects:</p>
          <a href="http://github.com/santamon/GUIFTW">GUI FTW!</a><br />
          <a href="http://github.com/santamon/sroo">Sroo</a>
        </nav>
        <nav id="catogries_menu">
          <p>Categories:</p>
          <a href="clojure-category.html">Clojure</a><br />
          <a href="gui-ftw-category.html">GUI</a><br />
          <a href="javascript-category.html">JavaScript</a>
        </nav>
        <nav id="links_menu">
          <p>Links:</p>
          <a href="http://radek.pycka.com">Radek Pycka</a><br />
          <a href="http://blog.charmas.pl">Michał Charmas</a><br />
          <a href="http://konradhalas.blogspot.com/">Konrad Hałas</a><br />
          <a href="http://infoq.com">InfoQ</a>
        </nav>
        <nav id="archive_menu">
          <p>Archive:</p>
          
          




<label for="September_2011">September 2011</label>
<input id="September_2011" type="checkbox" />
<ul>



<li><time datetime="2011-09-23">
    23
</time> <a href="/sroo.html">Another HTML/JavaScript Slideshow Library</a></li>






<li><time datetime="2011-09-11">
    11
</time> <a href="/whys-behind-new-design.html">The Whys Behind This New Freaky Design</a></li>




</ul>
<label for="June_2011">June 2011</label>
<input id="June_2011" type="checkbox" />
<ul>



<li><time datetime="2011-06-20">
    20
</time> <a href="/sound-synthesis.html">Sound Synthesis & Playback in Clojure</a></li>




</ul>
<label for="May_2011">May 2011</label>
<input id="May_2011" type="checkbox" />
<ul>



<li><time datetime="2011-05-22">
    22
</time> <a href="/webglol.html">WebGLOL</a></li>






<li><time datetime="2011-05-16">
    16
</time> <a href="/reintroducing-guiftw.html">Reintroducing GUI FTW! and Progress Report</a></li>






<li><time datetime="2011-05-07">
    7
    
</time> <a href="/restarting-in-english-mode.html">Restarting in English Mode</a></li>




</ul>
<label for="April_2011">April 2011</label>
<input id="April_2011" type="checkbox" />
<ul>



<li><time datetime="2011-04-04">
    4
    
</time> <a href="/zdarzenia-guiftw.html">Zdarzenia w GUI FTW!</a></li>




</ul>
<label for="March_2011">March 2011</label>
<input id="March_2011" type="checkbox" />
<ul>



<li><time datetime="2011-03-20">
    20
</time> <a href="/niech-sie-stanie-gui-ftw.html">Niech się stanie GUI FTW!</a></li>




</ul>
<label for="October_2010">October 2010</label>
<input id="October_2010" type="checkbox" />
<ul>



<li><time datetime="2010-10-16">
    16
</time> <a href="/idea-iluzja.html">Idea i Iluzja łeb w web</a></li>




</ul>
<label for="September_2010">September 2010</label>
<input id="September_2010" type="checkbox" />
<ul>



<li><time datetime="2010-09-03">
    3
    
</time> <a href="/blad-mlodego-parsownika.html">Błąd młodego parsownika</a></li>




</ul>
<label for="August_2010">August 2010</label>
<input id="August_2010" type="checkbox" />
<ul>



<li><time datetime="2010-08-16">
    16
</time> <a href="/intro.html">Intro</a></li>




</ul>
<label for="January_2010">January 2010</label>
<input id="January_2010" type="checkbox" />
<ul>



<li><time datetime="2010-01-07">
    7
    
</time> <a href="/efekty-uboczne-programowania.html">Efekty uboczne programowania</a></li>




</ul>
<label for="June_2009">June 2009</label>
<input id="June_2009" type="checkbox" />
<ul>



<li><time datetime="2009-06-07">
    7
    
</time> <a href="/one-makefile-to-rule-them-all.html">One Makefile To Rule Them All</a></li>


</ul>


        </nav>
      </div>
    </div>
    <footer><div>Copywrong 2011 Szymon Witamborski</div></footer>
    <script src="media/hyphenator.js"></script>
    <!-- google analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-23922729-1']);
      _gaq.push(['_trackPageview']);

      (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
